import Image from 'components/Image';
import Layout from 'components/Layout';
import AppStoreItem from 'components/md/AppStoreItem';
import FullWidth from 'components/md/FullWidth';
import Header from 'components/md/Header';
import Paragraph from 'components/md/Paragraph';
import RegularWidth from 'components/md/RegularWidth';
import Title from 'components/md/Title';
import TwoColumns from 'components/md/TwoColumns';
import Caption from 'components/md/Caption';
import rootMeta from 'contents/pages.json';
import { NextSeo } from 'next-seo';
import { getAllImage } from 'utils/image';

export const meta = {
  slug: 'whatsapp-dx',
  name: 'Whatsapp Business Cloud API',
  category: ['SaaS', 'Technology'],
  description: 'Developer Experience',
  sub: 'Technology',
  year: 2022,
  preview: '08',
  width: 'full',
  order: 8,
  gradientFrom: '#3CC069',
  gradientTo: '#BEE0F3',
};

export async function getStaticProps(context) {
  const images = await getAllImage('whatsapp');
  const { gradientFrom, gradientTo } = meta;
  for (const key in images) {
    images[key] = { ...images[key], gradientFrom, gradientTo };
  }
  const ogImage =
    (process.env.HOST || '') + '/images/home/' + meta.preview + '.png';
  const title = rootMeta.name + ' | ' + meta.name;

const features = [
{ image: 'icon_01', description: 'Directly onboard and test the WhatsApp Cloud API within minutes' },
{ image: 'icon_02', description: "Effortlessly learn, build, and launch applications on our API" },
{ image: 'icon_03', description: 'Reliably scale and monetize applications to grow their businesses on our API' },
];

const keys = [
{
color: '#1C2B34',
time:'Milestone 1 - November, 2021',
name: 'Private Beta',
scale: '~10 developers',
locale: 'US, Brazil, India',
first: '~ a few weeks',
problems: [
'User must provide and validate their own phone numbers to test.',
'App review required (Meta Developer Platform requirement)',
'Private API available to selected partners only',
'Manual business verification',
'Can only send messages via an OS’s terminal interface',
'Users dropped off during Meta for Developers onboarding flow',
],
solutions: [
'Self-served experience'
]
},
{
color: '#0D5633',
time:'Milestone 2 - March, 2022',
name: 'Public Beta',
scale: '~500 developers',
locale: 'US, Brazil, India',
first: '~ a few days',
problems: [
'Requires App Review',
'Requires Biz verification and Display Name Review for Trust Tier',
'Credit card payment not supported, relying on line of credit',
'Users dropped off during Meta onboarding flow',
],
solutions: [
'Private API -> Public API',
'One-click self-serve onboarding',
'User is provided with a test phone number',
'Send messages directly from the dev console',
'Explore the API more easily with Postman Collection',
'Manage phone numbers more easily with Account Overview',
]
},
{
color: '#0C953A',
time:'Milestone 3 - March, 2022',
name: 'General Availability',
scale: 'Global',
locale: 'Global',
first: '~ a few minutes',
problems: [
'Users dropped off during Meta onboarding flow',
],
solutions: [
'Step-by-step Getting Started page',
'CC-supported payment',
'App Review removal',
'Trust Tier (Business Verification and Display Name Review removal from onboarding)',
]
}
];

return { props: { images, ...meta, title, ogImage, features, keys } };
}

export default ({ children }) => (
  <Layout title={meta.name} p="2xl:t-8">
    {children}
  </Layout>
);

<NextSeo
  title={props.title}
  description={props.description}
  openGraph={{
    title: props.title,
    description: props.description,
    images: [
      {
        url: props.ogImage,
        alt: props.title,
        type: 'png',
      },
    ],
  }}
/>

<FullWidth>
  <Image {...props.images['01']} />
</FullWidth>

<RegularWidth>
  <Paragraph>
    On May 19th 2022, WhatsApp launched Developer Experience - General
    Availability to enable businesses and developers globally to onboard and
    build on the Cloud API directly.
  </Paragraph>
</RegularWidth>

<RegularWidth>
  <TwoColumns>
    <Image {...props.images['02']} />
    <Image {...props.images['03']} />
  </TwoColumns>
  <Caption>
    Mark Zuckerberg introduced the WhatsApp CloudAPI to the world on Instagram
    and Facebook.
  </Caption>
</RegularWidth>

<RegularWidth>
  <Image {...props.images['04']} />
</RegularWidth>

<RegularWidth>
  <Paragraph>
    <span style={{ color: '#20C659' }}>The WhatsApp Business Cloud API</span>{' '}
    enables businesses to chat with customers on their preferred channel through
    a customized experience that’s quick to implement. This critical launch
    enabled developers to:
  </Paragraph>
</RegularWidth>

<RegularWidth>
  <div display="grid" grid="cols-1 lg:cols-3 gap-5">
    {props.features.map((feature, index) => (
      <div
        display="flex"
        flex="col"
        justify="center"
        items="center"
        bg="bg13"
        p="10"
        space="y-5"
        border="rounded-lg"
        key={index}
      >
        <div display="flex w-30 h-30" text="center">
          <Image {...props.images[feature.image]} />
        </div>
        <p text="leading-lh01 tc09" font="worksans" text="center">
          {feature.description}
        </p>
      </div>
    ))}
  </div>
</RegularWidth>

<RegularWidth>
  <Header>1 — Key product miletones</Header>
</RegularWidth>

<RegularWidth>
  <div display="grid" grid="cols-1 lg:cols-3 gap-4">
    {props.keys.map((k, index) => (
      <div border="rounded-lg" className="whatsapp-feature" key={index}>
        <div
          p="8"
          border="rounded-lg"
          text="[#E5F8E1]"
          style={{ backgroundColor: k.color }}
        >
          <p font="redhat semibold" m="b-3">
            {k.time}
          </p>
          <p font="redhat semibold" text="3xl" m="b-8">
            {k.name}
          </p>
          <div flex="~" gap="5" m="b-5">
            <div>
              <label text="xs" m="b-1">
                Scale
              </label>
              <p font="worksans">{k.scale}</p>
            </div>
            <div>
              <label text="xs" m="b-1">
                Locales
              </label>
              <p font="worksans">{k.locale}</p>
            </div>
          </div>
          <div>
            <label text="xs" m="b-1">
              Time to send the first test message:
            </label>
            <p font="worksans">{k.first}</p>
          </div>
        </div>
        <div p="8">
          <div m="b-2" flex="~" gap="2">
            <div h="6" w="6">
              <Image {...props.images['problem']} />
            </div>
            <label font="worksans medium">Problems</label>
          </div>
          <ul font="normal" text="sm" list="disc" m="l-[22px] b-8">
            {k.problems.map((i, probIndex) => (
              <li key={probIndex}>{i}</li>
            ))}
          </ul>
          <div m="b-2" flex="~" gap="2">
            <div h="6" w="6">
              <Image {...props.images['solution']} />
            </div>
            <label font="worksans medium">Solutions</label>
          </div>
          <ul font="normal" text="sm" list="disc" m="l-[22px] b-8">
            {k.solutions.map((i, solIndex) => (
              <li key={solIndex}>{i}</li>
            ))}
          </ul>
        </div>
      </div>
    ))}
  </div>
</RegularWidth>

<RegularWidth>
  <Header>2 — Core user experience</Header>
</RegularWidth>

<RegularWidth>
  <Image {...props.images['main_02']} />
  <Image {...props.images['main_03']} />
  <Image {...props.images['main_04']} />
  <Image {...props.images['main_05']} />
  <Image {...props.images['main_06']} />
  <Image {...props.images['main_07']} />
  <Image {...props.images['main_08']} />
  <Image {...props.images['main_09']} />
  <Image {...props.images['main_10']} />
</RegularWidth>
